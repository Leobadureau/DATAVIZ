<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Comparaison Pilotes F1 - Mercedes</title>
  <link rel="stylesheet" href="team.css">
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
  <style>
    body {
      margin: 0;
      background-color: #060B1A;
      font-family: Arial, Helvetica, sans-serif;
      color: white;
    }

    #chart {
      width: 100%;
      height: 500px;
      margin-top: 50px;
    }

    .back-home {
      margin: 20px;
      display: inline-block;
      color: white;
      text-decoration: none;
    }
  </style>
</head>
<body class="mercedes">

  <a href="../Index.html" class="back-home">← Retour à l'accueil</a>

  <!-- VIDÉO TEAM -->
  <section class="team-video">
    <h1>Mercedes</h1>
    <div class="video-container">
      <iframe width="692" height="389" 
              src="https://www.youtube.com/embed/kcnZIfWIDzg" 
              title="Mercedes F1" 
              frameborder="0" 
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
              allowfullscreen>
      </iframe>
    </div>
  </section>

  <!-- ENCARTE PILOTES & TEAM -->
  <section class="team-info">
    <h2>Les Pilotes & Team Principal</h2>
    <div class="team-cards">
      <!-- Pilote 1 -->
      <div class="card pilote">
        <img src="https://sportrenders.com/wp-content/uploads/2024/06/Russell-PNG-Formula-1-Mercedes-Render.png" alt="George Russell">
        <h3>George Russell</h3>
        <p>Pilote N°1</p>
      </div>

      <!-- Pilote 2 -->
      <div class="card pilote">
        <img src="https://images.ctfassets.net/1fvlg6xqnm65/5YiTw6xQHuM94ty9yLDnyk/ff67d40c690940307f48d1b370352577/Kimi_Antonelli.png?w=1024" alt="antonelli">
        <h3>Andrea Kimi Antonelli</h3>
        <p>Pilote N°2</p>
      </div>

      <!-- Team Principal -->
      <div class="card principal">
        <img src="https://gpfanatics.com/wp-content/uploads/2024/01/Toto_Wolff.png" alt="Team Principal">
        <h3>Toto Wolff</h3>
        <p>Team Principal</p>
      </div>
    </div>
  </section>

  <!-- GRAPH DUEL -->
  <div id="chart"></div>

  <script>
    const chart = echarts.init(document.getElementById('chart'));
    
    fetch('../json/f1_2025_teammate_duels.json')
      .then(res => res.json())
      .then(data => {
        const duel = data.duels.find(d => d.team === 'Mercedes');

        const categories = [
          'Qualifications',
          'Courses',
          'Points',
          'Victoires',
          'Podiums',
          'Poles',
          'Top 10'
        ];

        const russell = [
          duel.stats.qualifications[0],
          duel.stats.races[0],
          duel.stats.points[0],
          duel.stats.wins[0],
          duel.stats.podiums[0],
          duel.stats.poles[0],
          duel.stats.top_10[0]
        ];

        const antonelli = [
          -duel.stats.qualifications[1],
          -duel.stats.races[1],
          -duel.stats.points[1],
          -duel.stats.wins[1],
          -duel.stats.podiums[1],
          -duel.stats.poles[1],
          -duel.stats.top_10[1]
        ];

        chart.setOption({
          tooltip: {
            trigger: 'axis',
            axisPointer: { type: 'shadow' }
          },
          legend: {
            // ✅ Antonelli à gauche, Russell à droite
            data: [duel.drivers[1], duel.drivers[0]],
            textStyle: { color: '#fff' },
            top: 10
          },
          grid: { left: 120, right: 120, top: 60, bottom: 40 },
          xAxis: {
            type: 'value',
            axisLabel: { color: '#aaa', formatter: v => Math.abs(v) },
            splitLine: { lineStyle: { type: 'dashed', color: '#333' } }
          },
          yAxis: {
            type: 'category',
            data: categories,
            axisTick: { show: false },
            axisLabel: { color: '#fff', fontWeight: 'bold' }
          },
          series: [
            {
              name: duel.drivers[1], // Antonelli
              type: 'bar',
              stack: 'total',
              label: { show: true, position: 'left', formatter: v => Math.abs(v.value) },
              itemStyle: { color: '#111' }, // noir Mercedes
              data: antonelli
            },
            {
              name: duel.drivers[0], // Russell
              type: 'bar',
              stack: 'total',
              label: { show: true, position: 'right' },
              itemStyle: { color: '#00D2BE' }, // turquoise Mercedes
              data: russell
            }
          ]
        });

        window.addEventListener('resize', chart.resize);
      });
  </script>

</body>
</html>
